{% extends "control/base_central.html" %}
{% block title %}권한요청 대기{% endblock %}
{% block content %}
<div class="container-fluid px-4">
  <h1 class="h3 mb-3">권한요청 대기</h1>
  <div class="card"><div class="card-body table-responsive">
    <table class="table align-middle">
      <thead><tr>
        <th>요청자</th><th>대상(직원)</th><th>그룹</th><th>권한</th><th>요청시각</th><th class="text-end">액션</th>
      </tr></thead>
      <tbody>
        {% for it in items %}
        <tr>
          <td>{{ it.requester_email }}</td>
          <td>{{ it.target_email }}</td>
          <td>{{ it.group_name }} ({{ it.group_code }})</td>
          <td>{{ it.role_code }}</td>
          <td>{{ it.created_at|date:"Y-m-d H:i" }}</td>
          <td class="text-end">
            <form method="post" action="{% url 'control:join_request_decide' it.id 'approve' %}" class="d-inline">{% csrf_token %}
              <button class="btn btn-sm btn-primary">승인</button>
            </form>
            <form method="post" action="{% url 'control:join_request_decide' it.id 'reject' %}" class="d-inline">{% csrf_token %}
              <button class="btn btn-sm btn-outline-secondary">거절</button>
            </form>
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="5" class="text-center text-muted">대기 중 요청이 없습니다.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div></div>
</div>
{% endblock %}
